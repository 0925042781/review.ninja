<div class="row">
	<div class="col-md-12">

		<p class="lead">{{ repo.value.full_name }}</p>

		<tabset>
			<tab heading="Pull Requests">

				<!-- Branches filter -->
				<div class="btn-group">
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
				    {{ selectedfilters.branch  || 'All branches'}}
				    <span class="caret"></span>
				  </a>
				  <ul class="dropdown-menu">
				  	<li>
				  		<a href="#" ng-href="#" ng-click="selectFilter('branch', null)">All branches</a>
				  	</li>
				  	<li ng-show="branches.loading">Loading branches...</li>
				  	<li ng-repeat="branch in branches.value" ng-show="branches.loaded">
				  		<a href="#" ng-href="#" ng-click="selectFilter('branch', branch.name)">{{ branch.name }}</a>
				  	</li>
				  </ul>
				</div>

				<!-- Pull Request Status filter -->
				<div class="btn-group">
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
				    {{ selectedfilters.state || 'All pull request states'}}
				    <span class="caret"></span>
				  </a>
				  <ul class="dropdown-menu">
				  	<li>
				  		<a href="#" ng-href="#" ng-click="selectFilter('state', null)">All pull request states</a>
				  	</li>
				  	<li ng-repeat="state in pullRequestStates">
				  		<a href="#" ng-href="#" ng-click="selectFilter('state', state)">{{ state }}</a>
				  	</li>
				  </ul>
				</div>

				<!-- Review Status filter -->
				<div class="btn-group">
				  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
				    {{ selectedfilters.review_status || 'All review statuses'}}
				    <span class="caret"></span>
				  </a>
				  <ul class="dropdown-menu">
				  	<li>
				  		<a href="#" ng-href="#" ng-click="selectFilter('review_status', null)">All review statuses</a>
				  	</li>
				  	<li ng-show="branches.loading">Loading branches...</li>
				  	<li ng-repeat="status in reviewStatuses" ng-show="branches.loaded">
				  		<a href="#" ng-href="#" ng-click="selectFilter('review_status', status)">{{ status }}</a>
				  	</li>
				  </ul>
				</div>

				<br>
				<br>

				<i class="fa fa-spin fa-spinner fa-3x center-block" ng-show="!pulls" style="text-align:center; display:block; margin:0 auto;"></i>

				<div class="well text-center" ng-show="pulls.length===0">
					<i class="fa fa-lg fa-code-fork"></i> Pull requests will show up here.
				</div>

				<div class="list-group">
					<a class="list-group-item" ng-repeat="pull in pullsFiltered" ui-sref="pull({ user:repo.value.owner.login, repo:repo.value.name, number:pull.number })">
						<span class="label pull-right" ng-class="{'label-default':pull.status==='pending', 'label-success':pull.status==='approved', 'label-danger':pull.status==='rejected'}" style="margin-top:12px">
							review is {{ pull.status }}
						</span>
						<span class="label pull-right" ng-class="{'label-success':pull.state==='open', 'label-danger':pull.state==='closed'}" style="margin-top:12px;margin-right: 8px;">{{ pull.state }}</span>
						<i class="fa fa-code-fork"></i> {{ pull.title }} ({{ pull.head.ref }})<br />
						<img ng-src="{{ pull.user.avatar_url }}" width="16px;" /> <small>{{ pull.user.login }} <span moment="pull.created_at"></span></small>
					</a>
				</div>

			</tab>

			<tab heading="Commits">

				<i class="fa fa-spin fa-spinner fa-3x center-block" ng-show="commits.loading" style="text-align:center; display:block; margin:0 auto;"></i>


				<div class="list-group">
					<a class="list-group-item" ng-repeat="commit in commits.value" ui-sref="comm({ user:repo.value.owner.login, repo:repo.value.name, sha:commit.sha })">
						<span class="label pull-right" ng-class="{'label-default':commit.status==='pending', 'label-success':commit.status==='approved', 'label-danger':commit.status==='rejected'}" style="margin-top:12px;">
							{{ commit.status }}
						</span>
						{{ commit.sha | limitTo:8 }}: {{ commit.commit.message }}<br />
						<img ng-src="{{ commit.author.avatar_url }}" width="16px;" /> <small>{{ commit.author.login }} <span moment="commit.commit.committer.date"></span></small>
					</a>
				</div>

			</tab>

			<tab heading="Bots">

				<i class="fa fa-spin fa-spinner fa-3x center-block" ng-show="bots.loading" style="text-align:center; display:block; margin:0 auto;"></i>

				<div class="well text-center" ng-show="bots.value.length===0 && !add">
					Click <i class="fa fa-plus"></i> to create a bot.
				</div>

				<div class="list-group">
					<span class="list-group-item" ng-repeat="bot in bots.value">
						{{ bot.name }} &mdash; <small>{{ origin }}/vote/{{ bot._id }}/:sha</small>
						<span class="pull-right" style="height:24px; margin-top:-3px;">
							<bs-switch height="24px" type="checkbox" ng-model="blah" switch-size="small"></bs-switch>
						</span>
					</span>
					<span class="list-group-item" role="form" ng-show="add">
						<form ng-submit="addBot(name); name=null; add=false;" style="margin:0;">
							<div class="input-group">
								<input ng-model="name" focus="add" type="text" class="form-control" />
								<span class="input-group-btn">
									<button type="submit" class="btn btn-primary" ng-disabled="!valid">Add</button>
								</span>
							</div>
						</form>
						<validate arg="name" against="botNames" valid="valid" invalid-text="{{ name }} bot already exists" invalid-icon="fa-exclamation"></validate>
					</span>
				</div>

				<button type="button" class="btn btn-default pull-right" ng-click="add=!add">
					<i class="fa fa-times" ng-show="add"></i>
					<i class="fa fa-plus" ng-show="!add"></i>
				</button>
				
			</tab>
		</tabset>

	</div>
</div>