<tabset>
  <tab>
    <tab-heading>Review</tab-heading>

    <table style="width:100%;">
      <tr ng-repeat="comment in review.value" ng-show="comment.html">
        <td style="width:42px; padding-right:10px; vertical-align:top;">
          <img ng-show="comment.user" ng-src="{{ comment.user ? comment.user.avatar_url + '&s=42' : '/assets/images/user_deleted.jpg'}}" width="42px" />
        </td>
        <td>
          <div class="panel panel-default comment">
            <div class="panel-heading">
              <div class="panel-arrow"></div>
              <strong>{{ comment.user.login }}</strong> commented <span moment="comment.created_at"></span>
            </div>
            <div class="panel-body" ng-bind-html="comment.html"></div>
          </div>
        </td>
      </tr>
    </table>

    <i class="fa fa-2x fa-spinner fa-spin center-block" ng-show="review.loading"></i>

    <form role="form" ng-submit="addReviewComment()">
      <table style="width:100%" ng-show="!review.loading && !review.hasMore">
        <tr>
          <td style="width:42px; padding-right:10px; vertical-align:top;">
            <img ng-src="{{ user.value.avatar_url }}&s=42" width="42px" />
          </td>
          <td>
            <div class="panel panel-default comment">
              <div class="panel-heading">
                <div class="panel-arrow"></div>
                <strong>{{ user.value.login }}</strong>
              </div>
              <div class="panel-body" style="padding:0;">
                <textarea class="form-control" ng-model="$parent.$parent.$parent.reviewComment" rows="4" placeholder="Leave a pull request review comment"></textarea>
              </div>
            </div>

            <div class="pull-right">
              <i class="fa fa-lg fa-spinner fa-spin" ng-show="reviewing.loading" style="margin-right:10px;"></i>
              <button type="submit" class="btn btn-primary"  ng-disabled="!$parent.$parent.$parent.reviewComment">Review</button>
            </div>
            <div style="clear:both;"></div>
          </td>
        </tr>
      </table>
    </form>
  </tab>
  
  <tab>
    <tab-heading>Conversation</tab-heading>

    <table style="width:100%;">
      <tr ng-repeat="comment in conversation.value" ng-show="comment.html">
        <td style="width:42px; padding-right:10px; vertical-align:top;">
          <img ng-show="comment.user" ng-src="{{ comment.user ? comment.user.avatar_url + '&s=42' : '/assets/images/user_deleted.jpg'}}" width="42px" />
        </td>
        <td>
          <div class="panel panel-default comment">
            <div class="panel-heading">
              <div class="panel-arrow"></div>
              <strong>{{ comment.user.login }}</strong> commented <span moment="comment.created_at"></span>
            </div>
            <div class="panel-body" ng-bind-html="comment.html"></div>
          </div>
        </td>
      </tr>
    </table>

    <i class="fa fa-2x fa-spinner fa-spin center-block" ng-show="conversation.loading"></i>

    <form role="form" ng-submit="addComment()">
      <table style="width:100%" ng-show="!conversation.loading && !conversation.hasMore">
        <tr>
          <td style="width:42px; padding-right:10px; vertical-align:top;">
            <img ng-src="{{ user.value.avatar_url }}&s=42" width="42px" />
          </td>
          <td>
            <div class="panel panel-default comment">
              <div class="panel-heading">
                <div class="panel-arrow"></div>
                <strong>{{ user.value.login }}</strong>
              </div>
              <div class="panel-body" style="padding:0;">
                <textarea class="form-control" ng-model="$parent.$parent.$parent.comment" rows="4" placeholder="Leave a pull request comment"></textarea>
              </div>
            </div>

            <div class="pull-right">
              <i class="fa fa-lg fa-spinner fa-spin" ng-show="commenting.loading" style="margin-right:10px;"></i>
              <button type="submit" class="btn btn-primary"  ng-disabled="!$parent.$parent.$parent.comment">Comment</button>
            </div>
            <div style="clear:both;"></div>
          </td>
        </tr>
      </table>
    </form>
  </tab>
</tabset>


<!-- <div class="panel panel-default inverse">

    <div class="panel-heading">
      <span class="lead">Comments</span>
      <span class="fa-stack plus-icon ob ob-create" style="margin-top:-5px;"
            ng-click="$parent.show=true; setFocus=true;"
            ng-show="repo.permissions.push">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-plus fa-stack-1x" style="font-size:20px; color:white"></i>
      </span>
      <div class="pull-right">
        <a ui-sref="repo.pull.issue.master()" 
           ng-click="$parent.state='open'; $parent.reference.issues=null;"
           class="btn btn-link inverse"
           ng-class="{active: state === 'open'}">
          <span class="octicon octicon-issue-opened"></span> <span class="visible-lg-inline">Open</span>
        </a>
        <a ui-sref="repo.pull.issue.master()" 
           ng-click="$parent.state='closed'; $parent.reference.issues=null;"
           class="btn btn-link inverse"
           ng-class="{active: state === 'closed'}">
          <span class="octicon octicon-issue-closed"></span> <span class="visible-lg-inline">Closed</span>
        </a>
      </div>
    </div>

    <div class="panel-body" ng-show="repo.permissions.push && (show || reference.selection.ref)" ng-class="{highlight: highlight}">
        <table style="width:100%;">
          <tr>
            <td style="width:48px; vertical-align:top; padding-right:10px;">
              <img ng-src="{{ user.value.avatar_url }}&s=48" width="48" />
            </td>
            <td>
              <form role="form" ng-submit="createIssue()">
                <div class="form-group">
                  <input type="text" ng-model="$parent.title" focus="setFocus" class="form-control" placeholder="Title">
                </div>
                <div class="form-group">
                  <textarea class="form-control" 
                            ng-model="$parent.description" 
                            rows="3" 
                            placeholder="Description">
                  </textarea>
                </div>
                <div class="form-group" style="margin:0">
                  <div class="btn-group" ng-show="reference.selection.ref && !creatingIssue" >
                    <button type="button"
                            class="btn btn-simple"
                            tooltip="{{ reference.selection.path }}"
                            tooltip-placement="bottom"
                            style="border-right:none;">
                      <i class="fa fa-lg fa-link"></i> line {{ reference.selection.start }} {{ reference.selection.end ? 'to ' + reference.selection.end : '' }}&nbsp;&nbsp;
                      <i class="fa fa-times" ng-click="$parent.show=true; $parent.reference.selection={};"></i>
                    </button>
                  </div>
                  <i class="fa fa-2x fa-spinner fa-spin" ng-show="creatingIssue" style="margin-right:10px;"></i>
                  <div class="pull-right">
                    <button type="button" class="btn btn-info" ng-click="$parent.show=false; $parent.reference.selection={};">Cancel</button>
                    <button type="submit" class="btn btn-primary" ng-disabled="!title">Submit</button>
                  </div>
                </div>
              </form>
            </td>
          </tr>
        </table>
    </div>
</div> -->

<!-- <section class="issues" ui-view></section> -->
